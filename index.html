<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muratbey Ofis Saya√ß Takip Sistemi</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <meta name="theme-color" content="#1e2738">
    <style>
        :root {
            --primary-color: #1e2738;
            --secondary-color: #d42f2f;
            --success-color: #22c55e;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --info-color: #3b82f6;
            --bg-color: #111827;
            --card-bg: #1f2937;
            --text-primary: #f3f4f6;
            --text-secondary: #9ca3af;
            --border-color: #374151;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 2px 0 rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.6;
            transition: var(--transition);
        }
        
        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-color);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.3s;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid var(--border-color);
            border-top-color: var(--secondary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Header Styles */
        .header {
            background: var(--card-bg);
            padding: 1rem 2rem;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: var(--transition);
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .logo-text h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }
        
        .logo-text p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin: 0;
        }
        
        /* Navigation */
        .nav-menu {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        /* User Menu */
        .user-menu {
            display: flex;
            align-items: center;
            gap: 1rem;
            position: relative;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: var(--transition);
        }
        
        .user-info:hover {
            background: var(--bg-color);
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--secondary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
        
        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            min-width: 200px;
            display: none;
            margin-top: 0.5rem;
            border: 1px solid var(--border-color);
        }
        
        .user-dropdown.show {
            display: block;
        }
        
        .user-dropdown-item {
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .user-dropdown-item:last-child {
            border-bottom: none;
        }
        
        .user-dropdown-item:hover {
            background: var(--bg-color);
        }
        
        /* Button Styles */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            font-size: 0.875rem;
        }
        
        .btn-primary {
            background: var(--secondary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background: #b91c1c;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-secondary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-success {
            background: var(--success-color);
            color: white;
        }
        
        .btn-warning {
            background: var(--warning-color);
            color: white;
        }
        
        .btn-info {
            background: var(--info-color);
            color: white;
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--border-color);
            color: var(--text-primary);
        }
        
        .btn-outline:hover {
            border-color: var(--secondary-color);
            color: var(--secondary-color);
        }
        
        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
        }
        
        /* Card Styles */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .card:hover {
            box-shadow: var(--shadow-lg);
        }
        
        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-primary);
        }
        
        .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 0.875rem;
            transition: var(--transition);
            background: var(--card-bg);
            color: var(--text-primary);
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(212, 47, 47, 0.1);
        }
        
        .form-input.error {
            border-color: var(--error-color);
        }
        
        .form-error {
            color: var(--error-color);
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }
        
        /* Toast Notification */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
        }
        
        .toast {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 1rem 1.5rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 1rem;
            min-width: 300px;
            animation: slideIn 0.3s ease-out;
        }
        
        .toast.success {
            border-left: 4px solid var(--success-color);
        }
        
        .toast.error {
            border-left: 4px solid var(--error-color);
        }
        
        .toast.warning {
            border-left: 4px solid var(--warning-color);
        }
        
        .toast.info {
            border-left: 4px solid var(--info-color);
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Login Page */
        .login-page {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('background.jpg');
            background-size: cover;
            background-position: center;
            padding: 2rem;
        }
        
        .login-card {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
            width: 100%;
            max-width: 400px;
            backdrop-filter: blur(10px);
        }
        
        .login-logo {
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .login-logo img {
            height: 80px;
            max-width: 100%;
            object-fit: contain;
        }
        
        .login-title {
            font-size: 1.8rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 0.5rem;
            color: var(--secondary-color);
        }
        
        .login-subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }
        
        /* Dashboard */
        .dashboard {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
            overflow-x: auto;
            white-space: nowrap;
        }
        
        .tab {
            padding: 0.75rem 1.5rem;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            position: relative;
            white-space: nowrap;
            background: transparent;
            border: none;
            color: var(--text-secondary);
        }
        
        .tab:hover {
            background: var(--bg-color);
            color: var(--text-primary);
        }
        
        .tab.active {
            color: var(--secondary-color);
            background: var(--bg-color);
        }
        
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -0.5rem;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--secondary-color);
        }
        
        /* Tab Content */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Office Categories */
        .office-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .category-card {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
        }
        
        .category-card:hover {
            box-shadow: var(--shadow-lg);
        }
        
        .category-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1rem 1.5rem;
            font-weight: 600;
            font-size: 1.125rem;
        }
        
        .category-offices {
            padding: 1rem;
        }
        
        .office-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            transition: var(--transition);
            cursor: pointer;
        }
        
        .office-item:hover {
            border-color: var(--secondary-color);
            transform: translateY(-2px);
        }
        
        .office-item.complete {
            border-color: var(--success-color);
            background: rgba(34, 197, 94, 0.05);
        }
        
        .office-item.incomplete {
            border-color: var(--warning-color);
            background: rgba(245, 158, 11, 0.05);
        }
        
        .office-info {
            display: flex;
            flex-direction: column;
        }
        
        .office-no {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1rem;
        }
        
        .office-name {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        
        .office-meters {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            margin-top: 0.5rem;
        }
        
        .meter-info {
            font-size: 0.75rem;
            color: var(--text-secondary);
            display: flex;
            justify-content: space-between;
        }
        
        .office-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .status-dot.complete {
            background: var(--success-color);
        }
        
        .status-dot.incomplete {
            background: var(--warning-color);
        }
        
        .status-dot.pending {
            background: var(--error-color);
        }
        
        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }
        
        .stat-icon.primary {
            background: rgba(30, 39, 56, 0.3);
            color: var(--primary-color);
        }
        
        .stat-icon.success {
            background: rgba(34, 197, 94, 0.2);
            color: var(--success-color);
        }
        
        .stat-icon.warning {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning-color);
        }
        
        .stat-icon.error {
            background: rgba(239, 68, 68, 0.2);
            color: var(--error-color);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }
        
        /* Warehouse */
        .warehouse-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .warehouse-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .warehouse-card:hover {
            box-shadow: var(--shadow-lg);
        }
        
        .warehouse-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .warehouse-name {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        /* History Table */
        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        .history-table th {
            background: var(--bg-color);
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid var(--border-color);
        }
        
        .history-table td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .history-table tr:hover {
            background: var(--bg-color);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }
        
        .modal.show {
            display: flex;
        }
        
        .modal-content {
            background: var(--card-bg);
            border-radius: 16px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
        }
        
        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }
        
        .modal-close:hover {
            background: var(--bg-color);
            color: var(--text-primary);
        }
        
        .modal-body {
            padding: 1.5rem;
        }
        
        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }
        
        /* Meter Tabs */
        .meter-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            background: var(--bg-color);
            padding: 0.25rem;
            border-radius: 8px;
        }
        
        .meter-tab {
            flex: 1;
            padding: 0.75rem;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            font-weight: 500;
            background: none;
            border: none;
            color: var(--text-secondary);
        }
        
        .meter-tab:hover {
            background: rgba(0, 0, 0, 0.3);
            color: var(--text-primary);
        }
        
        .meter-tab.active {
            background: var(--card-bg);
            color: var(--secondary-color);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        /* User Management */
        .user-management {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
        }
        
        .user-form-card {
            height: fit-content;
        }
        
        .user-list {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
        }
        
        .user-list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .user-list-title {
            font-size: 1.125rem;
            font-weight: 600;
        }
        
        .user-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .user-item:last-child {
            border-bottom: none;
        }
        
        .user-item-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .user-item-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--secondary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
        
        .user-item-details {
            display: flex;
            flex-direction: column;
        }
        
        .user-item-name {
            font-weight: 500;
            color: var(--text-primary);
        }
        
        .user-item-role {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        .user-item-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        /* Badge */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        
        .badge-success {
            background: rgba(34, 197, 94, 0.2);
            color: var(--success-color);
        }
        
        .badge-warning {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning-color);
        }
        
        .badge-error {
            background: rgba(239, 68, 68, 0.2);
            color: var(--error-color);
        }
        
        .badge-info {
            background: rgba(59, 130, 246, 0.2);
            color: var(--info-color);
        }
        
        /* Search */
        .search-container {
            position: relative;
            margin-bottom: 1.5rem;
        }
        
        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--card-bg);
            color: var(--text-primary);
            transition: var(--transition);
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--secondary-color);
        }
        
        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
                gap: 1rem;
            }
            
            .dashboard {
                padding: 0 1rem;
            }
            
            .office-categories {
                grid-template-columns: 1fr;
            }
            
            .user-management {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .warehouse-grid {
                grid-template-columns: 1fr;
            }
            
            .developer-credit {
                bottom: 10px;
                right: 10px;
                font-size: 0.7rem;
                padding: 0.4rem 0.8rem;
            }
            
            .footer {
                padding: 1.5rem 1rem;
            }
            
            .footer-text {
                font-size: 0.8rem;
            }
            
            .footer-copyright {
                font-size: 0.8rem;
            }
        }
        
        /* Hide by default */
        .hidden {
            display: none !important;
        }
        
        /* Developer Credit */
        .developer-credit {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--card-bg);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            box-shadow: var(--shadow);
            font-size: 0.75rem;
            color: var(--text-secondary);
            z-index: 1000;
            transition: var(--transition);
        }
        
        .developer-credit:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }
        
        .developer-credit a {
            color: var(--secondary-color);
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
        }
        
        .developer-credit a:hover {
            color: var(--success-color);
        }
        
        /* Footer */
        .footer {
            background: var(--card-bg);
            padding: 2rem;
            margin-top: 4rem;
            border-top: 1px solid var(--border-color);
            text-align: center;
        }
        
        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .footer-text {
            color: var(--text-secondary);
            font-size: 0.875rem;
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        
        .footer-copyright {
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-spinner"></div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Login Page -->
    <div id="loginPage" class="login-page">
        <div class="login-card">
            <div class="login-logo">
                <img src="gti-logo.svg" alt="GTƒ∞ Logo">
            </div>
            <h1 class="login-title">Muratbey</h1>
            <p class="login-subtitle">Ofis Saya√ß Takip Sistemi</p>
            
            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label" for="username">Kullanƒ±cƒ± Adƒ±</label>
                    <input type="text" class="form-input" id="username" required autocomplete="username">
                    <span class="form-error" id="usernameError"></span>
                </div>
                <div class="form-group">
                    <label class="form-label" for="password">≈ûifre</label>
                    <input type="password" class="form-input" id="password" required autocomplete="current-password">
                    <span class="form-error" id="passwordError"></span>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    Giri≈ü Yap
                </button>
            </form>
        </div>
        
        <!-- Left Description for Login -->
        <div style="position: fixed; bottom: 60px; left: 20px; color: var(--text-secondary); font-size: 0.75rem; max-width: 300px; line-height: 1.4;">
            Ofis saya√ß takibi ve depo envanter y√∂netimi i√ßin geli≈ütirilen dijital takip sistemidir.
        </div>
        
        <!-- Developer Credit for Login -->
        <div class="developer-credit">
            Developed by <a href="https://www.linkedin.com/in/ahmet-dolen/" target="_blank" rel="noopener noreferrer">ADTech</a>
        </div>
        
        <!-- Footer for Login -->
        <div style="position: fixed; bottom: 60px; left: 50%; transform: translateX(-50%); text-align: center; color: var(--text-secondary); font-size: 0.75rem;">
            ¬© 2025 Muratbey
        </div>
    </div>

    <!-- Main App -->
    <div id="app" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-container">
                    <div class="logo-text">
                        <h1>üè¢ Ofis Saya√ßlarƒ±</h1>
                    </div>
                </div>
                <nav class="nav-menu">
                    <div class="user-menu">
                        <div class="user-info" id="userInfo">
                            <div class="user-avatar" id="userAvatar">T</div>
                            <div>
                                <div style="font-weight: 500;" id="userName">Kullanƒ±cƒ±</div>
                                <div style="font-size: 0.75rem; color: var(--text-secondary);" id="userRole">Teknik</div>
                            </div>
                        </div>
                        <div class="user-dropdown" id="userDropdown">
                            <div class="user-dropdown-item hidden" id="userManagementBtn">
                                <span>üë•</span> Kullanƒ±cƒ± Y√∂netimi
                            </div>
                            <div class="user-dropdown-item hidden" id="warehouseManagementBtn">
                                <span>üè™</span> Depo Y√∂netimi
                            </div>
                            <div class="user-dropdown-item hidden" id="officeManagementBtn">
                                <span>üè¢</span> Ofis Y√∂netimi
                            </div>
                            <div class="user-dropdown-item" id="logoutBtn">
                                <span>üö™</span> √áƒ±kƒ±≈ü Yap
                            </div>
                        </div>
                    </div>
                </nav>
            </div>
        </header>

        <!-- Dashboard -->
        <main class="dashboard">
            <!-- Tabs -->
            <div class="tabs" id="mainTabs">
                <button class="tab hidden" data-tab="offices" id="officesTabBtn">
                    <span>üè¢</span> Ofis Saya√ßlarƒ±
                </button>
                <button class="tab hidden" data-tab="warehouse" id="warehouseTabBtn">
                    <span>üì¶</span> Depo Envanteri
                </button>
                <button class="tab hidden" data-tab="history" id="historyTabBtn">
                    <span>üìä</span> Ge√ßmi≈ü
                </button>
                <button class="tab hidden" data-tab="stats" id="statsTabBtn">
                    <span>üìà</span> ƒ∞statistikler
                </button>
            </div>

            <!-- Office Tab Content -->
            <div id="officesTab" class="tab-content">
                <!-- Search -->
                <div class="search-container">
                    <span class="search-icon">üîç</span>
                    <input type="text" class="search-input" id="officeSearch" placeholder="Ofis ara...">
                </div>

                <!-- Office Categories -->
                <div class="office-categories" id="officeCategories">
                    <!-- Office categories will be populated here -->
                </div>
            </div>

            <!-- Warehouse Tab Content -->
            <div id="warehouseTab" class="tab-content">
                <!-- Warehouse Grid -->
                <div class="warehouse-grid" id="warehouseGrid">
                    <!-- Warehouse cards will be populated here -->
                </div>
            </div>

            <!-- History Tab Content -->
            <div id="historyTab" class="tab-content">
                <div class="card">
                    <h3 style="margin-bottom: 1.5rem;">üìä Saya√ß Okuma Ge√ßmi≈üi</h3>
                    <div id="historyContent">
                        <!-- History will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Stats Tab Content -->
            <div id="statsTab" class="tab-content">
                <!-- Export Button -->
                <div style="margin-bottom: 2rem;">
                    <button class="btn btn-success" onclick="exportToExcel()">
                        üìä Excel'e Aktar
                    </button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon primary">üè¢</div>
                        <div class="stat-value" id="totalOffices">0</div>
                        <div class="stat-label">Toplam Ofis</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon success">‚úì</div>
                        <div class="stat-value" id="completedOffices">0</div>
                        <div class="stat-label">Tamamlanan</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon error">‚è∞</div>
                        <div class="stat-value" id="pendingOffices">0</div>
                        <div class="stat-label">Bekleyen</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon warning">üìà</div>
                        <div class="stat-value" id="completionRate">0%</div>
                        <div class="stat-label">Tamamlanma Oranƒ±</div>
                    </div>
                </div>

                <!-- Alerts Section -->
                <div id="alertsSection">
                    <!-- Alerts will be populated here -->
                </div>
            </div>

            <!-- User Management Tab Content -->
            <div id="userManagementTab" class="tab-content">
                <div class="user-management">
                    <!-- User Creation Form -->
                    <div class="card user-form-card">
                        <h3 style="margin-bottom: 1.5rem;">Yeni Kullanƒ±cƒ± Ekle</h3>
                        <form id="userForm">
                            <div class="form-group">
                                <label class="form-label" for="newUsername">Kullanƒ±cƒ± Adƒ±</label>
                                <input type="text" class="form-input" id="newUsername" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="newPassword">≈ûifre</label>
                                <input type="password" class="form-input" id="newPassword" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="newFullName">Ad Soyad</label>
                                <input type="text" class="form-input" id="newFullName" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="newRole">Rol</label>
                                <select class="form-input" id="newRole" required>
                                    <option value="teknik">Teknik Personel</option>
                                    <option value="depoPersoneli">Depo Personeli</option>
                                    <option value="admin">Y√∂netici</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary" style="width: 100%;">
                                Kullanƒ±cƒ± Ekle
                            </button>
                        </form>
                    </div>

                    <!-- User List -->
                    <div class="user-list">
                        <div class="user-list-header">
                            <h3 class="user-list-title">Mevcut Kullanƒ±cƒ±lar</h3>
                            <span class="badge badge-success" id="userCount">0 Kullanƒ±cƒ±</span>
                        </div>
                        <div id="userList">
                            <!-- User list will be populated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Warehouse Management Tab Content -->
            <div id="warehouseManagementTab" class="tab-content">
                <div class="card">
                    <h3 style="margin-bottom: 1.5rem;">Depo Y√∂netimi</h3>
                    
                    <!-- Add Warehouse Form -->
                    <form id="warehouseForm" style="margin-bottom: 2rem;">
                        <div class="form-group">
                            <label class="form-label" for="warehouseName">Depo Adƒ±</label>
                            <input type="text" class="form-input" id="warehouseName" required>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            Depo Ekle
                        </button>
                    </form>

                    <!-- Warehouse List -->
                    <div id="warehouseManagementList">
                        <!-- Warehouse management list will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Office Management Tab Content -->
            <div id="officeManagementTab" class="tab-content">
                <div class="card">
                    <h3 style="margin-bottom: 1.5rem;">Ofis ve Saya√ß Y√∂netimi</h3>
                    
                    <!-- Office List -->
                    <div id="officeManagementList">
                        <!-- Office management list will be populated here -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Meter Entry Modal -->
    <div class="modal" id="meterModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="meterModalTitle">Saya√ß Giri≈üi</h2>
                <button class="modal-close" onclick="closeModal('meterModal')">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Meter Type Tabs -->
                <div class="meter-tabs">
                    <button class="meter-tab active" data-meter="electric" type="button">
                        <span>‚ö°</span> Elektrik
                    </button>
                    <button class="meter-tab" data-meter="water" type="button">
                        <span>üíß</span> Su
                    </button>
                    <button class="meter-tab" data-meter="gas" type="button">
                        <span>üî•</span> Doƒüalgaz
                    </button>
                </div>

                <!-- Meter Forms -->
                <form id="meterForm">
                    <input type="hidden" id="currentOfficeId">
                    
                    <!-- Electric Meter -->
                    <div id="electricMeterForm" class="meter-form">
                        <div class="form-group">
                            <label class="form-label" for="electricReading">
                                Elektrik Saya√ß Deƒüeri (kWh)
                                <span id="electricMeterNo" style="font-size: 0.75rem; color: var(--text-secondary);"></span>
                            </label>
                            <input type="number" class="form-input" id="electricReading" step="0.01" min="0">
                            <div id="electricPreviousValue" style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.5rem;"></div>
                        </div>
                    </div>

                    <!-- Water Meter -->
                    <div id="waterMeterForm" class="meter-form" style="display: none;">
                        <div class="form-group">
                            <label class="form-label" for="waterReading">
                                Su Saya√ß Deƒüeri (m¬≥)
                                <span id="waterMeterNo" style="font-size: 0.75rem; color: var(--text-secondary);"></span>
                            </label>
                            <input type="number" class="form-input" id="waterReading" step="0.01" min="0">
                            <div id="waterPreviousValue" style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.5rem;"></div>
                        </div>
                    </div>

                    <!-- Gas Meter -->
                    <div id="gasMeterForm" class="meter-form" style="display: none;">
                        <div class="form-group">
                            <label class="form-label" for="gasReading">
                                Doƒüalgaz Saya√ß Deƒüeri (m¬≥)
                                <span id="gasMeterNo" style="font-size: 0.75rem; color: var(--text-secondary);"></span>
                            </label>
                            <input type="number" class="form-input" id="gasReading" step="0.01" min="0">
                            <div id="gasPreviousValue" style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.5rem;"></div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('meterModal')">ƒ∞ptal</button>
                <button class="btn btn-primary" onclick="saveMeterReading()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Edit Office Modal -->
    <div class="modal" id="editOfficeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Ofis ve Saya√ß D√ºzenle</h2>
                <button class="modal-close" onclick="closeModal('editOfficeModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="editOfficeForm">
                    <input type="hidden" id="editOfficeId">
                    <div class="form-group">
                        <label class="form-label" for="editOfficeName">Ofis Adƒ±</label>
                        <input type="text" class="form-input" id="editOfficeName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="editOfficeNo">Ofis No</label>
                        <input type="text" class="form-input" id="editOfficeNo" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="editElectricMeterNo">Elektrik Saya√ß No</label>
                        <input type="text" class="form-input" id="editElectricMeterNo">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="editWaterMeterNo">Su Saya√ß No</label>
                        <input type="text" class="form-input" id="editWaterMeterNo">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="editGasMeterNo">Doƒüalgaz Saya√ß No</label>
                        <input type="text" class="form-input" id="editGasMeterNo">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('editOfficeModal')">ƒ∞ptal</button>
                <button class="btn btn-primary" onclick="saveOfficeEdit()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Add Product Modal -->
    <div class="modal" id="addProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="addProductModalTitle">√úr√ºn Ekle</h2>
                <button class="modal-close" onclick="closeModal('addProductModal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="addProductForm">
                    <input type="hidden" id="currentWarehouseId">
                    <div class="form-group">
                        <label class="form-label" for="productName">√úr√ºn Adƒ±</label>
                        <input type="text" class="form-input" id="productName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="productCategory">Kategori</label>
                        <input type="text" class="form-input" id="productCategory" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="productQuantity">Miktar</label>
                        <input type="number" class="form-input" id="productQuantity" min="1" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="productUnit">Birim</label>
                        <select class="form-input" id="productUnit" required>
                            <option value="Adet">Adet</option>
                            <option value="Kutu">Kutu</option>
                            <option value="Paket">Paket</option>
                            <option value="Kg">Kg</option>
                            <option value="Litre">Litre</option>
                            <option value="Metre">Metre</option>
                            <option value="Diƒüer">Diƒüer</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal('addProductModal')">ƒ∞ptal</button>
                <button class="btn btn-primary" onclick="saveProduct()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Warehouse Items Modal -->
    <div class="modal" id="warehouseItemsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="warehouseItemsModalTitle">Depo √úr√ºnleri</h2>
                <button class="modal-close" onclick="closeModal('warehouseItemsModal')">√ó</button>
            </div>
            <div class="modal-body">
                <div id="warehouseItemsList">
                    <!-- Warehouse items will be populated here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeModal('warehouseItemsModal')">Kapat</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script>
        // Global variables
        let AppData = {
            currentUser: null,
            offices: [],
            users: [],
            meterReadings: [],
            warehouses: []
        };

        // Office Categories
        const OFFICE_CATEGORIES = {
            '100 Numaralƒ± Ofisler': ['100', '101', '102', '103', '104', '105'],
            '1B Blok Ofisleri': ['1B-17', '1B-18', '1B-19', '1B-20', '1B-21'],
            '20 Blok Ofisleri': ['20-01', '20-02', '20-03', '20-04', '20-05'],
            '20A Blok Ofisleri': ['20A-01', '20A-02', '20A-03', '20A-04'],
            '2B Blok Ofisleri': ['2B-01', '2B-02', '2B-03', '2B-04', '2B-05'],
            '2B01 Blok Ofisleri': ['2B01-A', '2B01-B', '2B01-C', '2B01-D'],
            '3B Blok Ofisleri': ['3B-01', '3B-02', '3B-03', '3B-04', '3B-05'],
            'ATM Bloklarƒ±': ['ATM-01', 'ATM-02', 'ATM-03'],
            'ID Blok Ofisleri': ['ID-01', 'ID-02', 'ID-03', 'ID-04'],
            'MD1 Blok Ofisleri': ['MD1-01', 'MD1-02', 'MD1-03'],
            'MD2 Blok Ofisleri': ['MD2-01', 'MD2-02', 'MD2-03'],
            'SD1 Blok Ofisleri': ['SD1-01', 'SD1-02', 'SD1-03'],
            'SD2 Blok Ofisleri': ['SD2-01', 'SD2-02', 'SD2-03']
        };

        const DEFAULT_WAREHOUSES = [
            'SARI OTOPARK 5 NOLU DEPO',
            'SARI OTOPARK PEYZAJ DEPOSU',
            'YE≈ûƒ∞L OTOPARK DEPO',
            'YAKIT DEPOSU',
            'YE≈ûƒ∞L OTOPARK 5 NOLU DEPO',
            'ZEMƒ∞N 30 OFƒ∞S',
            '-1.KAT DEPO',
            'ZEMƒ∞N KAT DEPO',
            'ƒ∞≈ûLETME DEPO',
            'TEKNƒ∞K DEPO'
        ];

        // Utility functions
        function showToast(message, type = 'success') {
            const toastContainer = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <span>${type === 'success' ? '‚úì' : type === 'error' ? '‚úï' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è'}</span>
                <span>${message}</span>
            `;
            toastContainer.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        function showModal(modalId) {
            document.getElementById(modalId).classList.add('show');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        function hashPassword(password) {
            return btoa(password);
        }

        function verifyPassword(password, hash) {
            return hashPassword(password) === hash;
        }

        function formatDateTime(date) {
            return new Date(date).toLocaleString('tr-TR');
        }

        function formatDate(date) {
            return new Date(date).toLocaleDateString('tr-TR');
        }

        function generateId() {
            return Date.now().toString() + Math.random().toString(36).substr(2, 9);
        }

        // Initialize default data
        function initializeDefaultData() {
            // Users
            AppData.users = [
                {
                    username: 'admin',
                    password: hashPassword('admin123'),
                    fullName: 'Sistem Y√∂neticisi',
                    role: 'admin'
                },
                {
                    username: 'teknik',
                    password: hashPassword('teknik123'),
                    fullName: 'Teknik Personel',
                    role: 'teknik'
                },
                {
                    username: 'depo',
                    password: hashPassword('depo123'),
                    fullName: 'Depo Personeli',
                    role: 'depoPersoneli'
                }
            ];

            // Offices with meter numbers
            AppData.offices = [];
            let id = 1;
            Object.entries(OFFICE_CATEGORIES).forEach(([category, officeNos]) => {
                officeNos.forEach(officeNo => {
                    AppData.offices.push({
                        id: id.toString(),
                        office_no: officeNo,
                        name: '',
                        category: category,
                        electric: { 
                            meter_no: `ELE${String(id).padStart(6, '0')}`, 
                            last_reading: 0 
                        },
                        water: { 
                            meter_no: `SU${String(id).padStart(6, '0')}`, 
                            last_reading: 0 
                        },
                        gas: { 
                            meter_no: `GAZ${String(id).padStart(6, '0')}`, 
                            last_reading: 0 
                        },
                        history: []
                    });
                    id++;
                });
            });

            // Warehouses
            AppData.warehouses = DEFAULT_WAREHOUSES.map((name, index) => ({
                id: (index + 1).toString(),
                name: name,
                items: []
            }));

            AppData.meterReadings = [];
            AppData.warehouseItems = [];
        }

        // Authentication
        function handleLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            
            if (!username || !password) {
                showToast('Kullanƒ±cƒ± adƒ± ve ≈üifre gereklidir', 'error');
                return;
            }
            
            const user = AppData.users.find(u => 
                u.username === username && verifyPassword(password, u.password)
            );
            
            if (user) {
                AppData.currentUser = user;
                showDashboard();
                showToast(`Ho≈ü geldiniz, ${user.fullName}!`, 'success');
            } else {
                showToast('Ge√ßersiz kullanƒ±cƒ± adƒ± veya ≈üifre', 'error');
            }
        }

        function handleLogout() {
            AppData.currentUser = null;
            showLoginPage();
            showToast('Ba≈üarƒ±yla √ßƒ±kƒ±≈ü yaptƒ±nƒ±z', 'success');
        }

        // Page Navigation
        function showLoginPage() {
            document.getElementById('loginPage').style.display = 'flex';
            document.getElementById('app').style.display = 'none';
        }

        function showDashboard() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('app').style.display = 'block';
            
            const user = AppData.currentUser;
            document.getElementById('userName').textContent = user.fullName;
            document.getElementById('userAvatar').textContent = user.fullName.charAt(0).toUpperCase();
            
            let roleText = '';
            switch(user.role) {
                case 'admin': roleText = 'Y√∂netici'; break;
                case 'teknik': roleText = 'Teknik Personel'; break;
                case 'depoPersoneli': roleText = 'Depo Personeli'; break;
                default: roleText = 'Kullanƒ±cƒ±';
            }
            document.getElementById('userRole').textContent = roleText;
            
            setupRoleBasedAccess(user.role);
            renderOffices();
            renderWarehouses();
            renderHistory();
            updateStats();
        }

        function setupRoleBasedAccess(role) {
            // Hide all tabs and menu items first
            const allTabs = document.querySelectorAll('.tab');
            const allMenuItems = document.querySelectorAll('#userManagementBtn, #warehouseManagementBtn, #officeManagementBtn');
            
            allTabs.forEach(tab => tab.classList.add('hidden'));
            allMenuItems.forEach(item => item.classList.add('hidden'));
            
            // Show tabs based on role
            switch(role) {
                case 'admin':
                    document.getElementById('officesTabBtn').classList.remove('hidden');
                    document.getElementById('warehouseTabBtn').classList.remove('hidden');
                    document.getElementById('historyTabBtn').classList.remove('hidden');
                    document.getElementById('statsTabBtn').classList.remove('hidden');
                    document.getElementById('userManagementBtn').classList.remove('hidden');
                    document.getElementById('warehouseManagementBtn').classList.remove('hidden');
                    document.getElementById('officeManagementBtn').classList.remove('hidden');
                    switchTab('offices');
                    break;
                case 'teknik':
                    document.getElementById('officesTabBtn').classList.remove('hidden');
                    document.getElementById('historyTabBtn').classList.remove('hidden');
                    document.getElementById('statsTabBtn').classList.remove('hidden');
                    switchTab('offices');
                    break;
                case 'depoPersoneli':
                    document.getElementById('warehouseTabBtn').classList.remove('hidden');
                    switchTab('warehouse');
                    break;
            }
        }

        // Tab switching
        function switchTab(tabName) {
            // Remove active from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Hide all content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Show selected tab and content
            const selectedTab = document.querySelector(`[data-tab="${tabName}"]`);
            const selectedContent = document.getElementById(`${tabName}Tab`);
            
            if (selectedTab && selectedContent) {
                selectedTab.classList.add('active');
                selectedContent.classList.add('active');
            }
            
            // Update content based on tab
            if (tabName === 'stats') {
                updateStats();
            } else if (tabName === 'warehouse') {
                renderWarehouses();
            } else if (tabName === 'offices') {
                renderOffices();
            } else if (tabName === 'history') {
                renderHistory();
            } else if (tabName === 'userManagement') {
                renderUsers();
            } else if (tabName === 'warehouseManagement') {
                renderWarehouseManagement();
            } else if (tabName === 'officeManagement') {
                renderOfficeManagement();
            }
        }

        // Render functions
        function renderOffices() {
            const container = document.getElementById('officeCategories');
            const searchTerm = document.getElementById('officeSearch').value.toLowerCase();
            
            let html = '';
            
            Object.entries(OFFICE_CATEGORIES).forEach(([category, officeNos]) => {
                const categoryOffices = AppData.offices.filter(office => 
                    office.category === category &&
                    (searchTerm === '' || 
                     office.office_no.toLowerCase().includes(searchTerm) ||
                     office.name.toLowerCase().includes(searchTerm))
                );
                
                if (categoryOffices.length === 0 && searchTerm) return;
                
                html += `
                    <div class="category-card">
                        <div class="category-header">${category}</div>
                        <div class="category-offices">
                `;
                
                categoryOffices.forEach(office => {
                    const readings = getTodayReadings(office.id);
                    const hasReadings = readings.electric || readings.water || readings.gas;
                    const statusClass = hasReadings ? 'complete' : 'incomplete';
                    
                    html += `
                        <div class="office-item ${statusClass}" onclick="openMeterModal('${office.id}')">
                            <div class="office-info">
                                <div class="office-no">${office.office_no}</div>
                                <div class="office-name">${office.name || 'Bo≈ü Ofis'}</div>
                                <div class="office-meters">
                                    ${readings.electric ? `<div class="meter-info"><span>‚ö° ${readings.electric.value} kWh</span><span>${readings.electric.user}</span></div>` : ''}
                                    ${readings.water ? `<div class="meter-info"><span>üíß ${readings.water.value} m¬≥</span><span>${readings.water.user}</span></div>` : ''}
                                    ${readings.gas ? `<div class="meter-info"><span>üî• ${readings.gas.value} m¬≥</span><span>${readings.gas.user}</span></div>` : ''}
                                </div>
                            </div>
                            <div class="office-status">
                                <div class="status-dot ${statusClass}"></div>
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function getTodayReadings(officeId) {
            const today = new Date().toDateString();
            const todayReadings = AppData.meterReadings.filter(r => 
                r.officeId === officeId && 
                new Date(r.date).toDateString() === today
            );
            
            const readings = {};
            todayReadings.forEach(reading => {
                readings[reading.type] = {
                    value: reading.value,
                    user: reading.user,
                    date: reading.date
                };
            });
            
            return readings;
        }

        function renderWarehouses() {
            const container = document.getElementById('warehouseGrid');
            
            const html = AppData.warehouses.map(warehouse => {
                const itemCount = AppData.warehouseItems.filter(item => item.warehouseId === warehouse.id).length;
                
                return `
                    <div class="warehouse-card">
                        <div class="warehouse-header">
                            <div class="warehouse-name">${warehouse.name}</div>
                            <span class="badge badge-info">${itemCount} √úr√ºn</span>
                        </div>
                        <div style="margin-top: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <button class="btn btn-primary btn-sm" onclick="openAddProductModal('${warehouse.id}')">
                                ‚ûï √úr√ºn Ekle
                            </button>
                            <button class="btn btn-info btn-sm" onclick="viewWarehouseItems('${warehouse.id}')">
                                üì¶ √úr√ºnleri G√∂r
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
            
            container.innerHTML = html;
        }

        function renderHistory() {
            const container = document.getElementById('historyContent');
            
            if (AppData.meterReadings.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üìä</div>
                        <div style="font-size: 1.25rem; margin-bottom: 0.5rem;">Hen√ºz Kayƒ±t Yok</div>
                        <div>Saya√ß okumalarƒ±nƒ±z burada g√∂r√ºnt√ºlenecek.</div>
                    </div>
                `;
                return;
            }
            
            // Group readings by office and type
            const groupedReadings = {};
            AppData.meterReadings.forEach(reading => {
                const office = AppData.offices.find(o => o.id === reading.officeId);
                if (!office) return;
                
                const key = `${office.office_no} - ${office.name || 'Bo≈ü Ofis'}`;
                if (!groupedReadings[key]) {
                    groupedReadings[key] = {
                        electric: [],
                        water: [],
                        gas: []
                    };
                }
                groupedReadings[key][reading.type].push(reading);
            });
            
            let html = '';
            Object.entries(groupedReadings).forEach(([officeKey, readings]) => {
                html += `<h4 style="margin: 1.5rem 0 1rem; color: var(--secondary-color);">${officeKey}</h4>`;
                
                ['electric', 'water', 'gas'].forEach(type => {
                    if (readings[type].length > 0) {
                        const typeNames = { electric: 'Elektrik', water: 'Su', gas: 'Doƒüalgaz' };
                        const typeIcons = { electric: '‚ö°', water: 'üíß', gas: 'üî•' };
                        const typeUnits = { electric: 'kWh', water: 'm¬≥', gas: 'm¬≥' };
                        
                        html += `
                            <h5 style="margin: 1rem 0 0.5rem; color: var(--text-primary);">
                                ${typeIcons[type]} ${typeNames[type]} Saya√ß Ge√ßmi≈üi
                            </h5>
                            <table class="history-table">
                                <thead>
                                    <tr>
                                        <th>Tarih</th>
                                        <th>Deƒüer (${typeUnits[type]})</th>
                                        <th>Personel</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${readings[type].sort((a, b) => new Date(b.date) - new Date(a.date)).map(r => `
                                        <tr>
                                            <td>${formatDateTime(r.date)}</td>
                                            <td>${r.value}</td>
                                            <td>${r.user}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        `;
                    }
                });
            });
            
            container.innerHTML = html;
        }

        function renderUsers() {
            const userList = document.getElementById('userList');
            const users = AppData.users;
            
            document.getElementById('userCount').textContent = `${users.length} Kullanƒ±cƒ±`;
            
            const roleNames = {
                admin: 'Y√∂netici',
                teknik: 'Teknik Personel',
                depoPersoneli: 'Depo Personeli'
            };
            
            const html = users.map(user => `
                <div class="user-item">
                    <div class="user-item-info">
                        <div class="user-item-avatar">
                            ${user.fullName.charAt(0).toUpperCase()}
                        </div>
                        <div class="user-item-details">
                            <div class="user-item-name">${user.fullName}</div>
                            <div class="user-item-role">${roleNames[user.role] || user.role}</div>
                        </div>
                    </div>
                    <div class="user-item-actions">
                        ${user.username !== 'admin' ? `
                            <button class="btn btn-sm btn-outline" onclick="deleteUser('${user.username}')">
                                Sil
                            </button>
                        ` : ''}
                    </div>
                </div>
            `).join('');
            
            userList.innerHTML = html;
        }

        function renderWarehouseManagement() {
            const container = document.getElementById('warehouseManagementList');
            
            const html = AppData.warehouses.map(warehouse => `
                <div class="user-item">
                    <div class="user-item-info">
                        <div class="user-item-avatar">üè™</div>
                        <div class="user-item-details">
                            <div class="user-item-name">${warehouse.name}</div>
                        </div>
                    </div>
                    <div class="user-item-actions">
                        <button class="btn btn-sm btn-outline" onclick="deleteWarehouse('${warehouse.id}')">
                            Sil
                        </button>
                    </div>
                </div>
            `).join('');
            
            container.innerHTML = html;
        }

        function renderOfficeManagement() {
            const container = document.getElementById('officeManagementList');
            
            const html = AppData.offices.map(office => `
                <div class="user-item">
                    <div class="user-item-info">
                        <div class="user-item-avatar">üè¢</div>
                        <div class="user-item-details">
                            <div class="user-item-name">${office.office_no} - ${office.name || 'Bo≈ü Ofis'}</div>
                            <div class="user-item-role">
                                ‚ö° ${office.electric.meter_no} | üíß ${office.water.meter_no} | üî• ${office.gas.meter_no}
                            </div>
                        </div>
                    </div>
                    <div class="user-item-actions">
                        <button class="btn btn-sm btn-info" onclick="editOffice('${office.id}')">
                            D√ºzenle
                        </button>
                    </div>
                </div>
            `).join('');
            
            container.innerHTML = html;
        }

        function updateStats() {
            const offices = AppData.offices;
            const today = new Date().toDateString();
            const todayReadings = AppData.meterReadings.filter(r => 
                new Date(r.date).toDateString() === today
            );
            
            const completedOffices = new Set(todayReadings.map(r => r.officeId)).size;
            const totalOffices = offices.length;
            const pendingOffices = totalOffices - completedOffices;
            const completionRate = totalOffices > 0 ? Math.round((completedOffices / totalOffices) * 100) : 0;
            
            document.getElementById('totalOffices').textContent = totalOffices;
            document.getElementById('completedOffices').textContent = completedOffices;
            document.getElementById('pendingOffices').textContent = pendingOffices;
            document.getElementById('completionRate').textContent = completionRate + '%';
        }

        // Meter Entry
        function openMeterModal(officeId) {
            const office = AppData.offices.find(o => o.id === officeId);
            if (!office) return;
            
            document.getElementById('meterModalTitle').textContent = `${office.office_no} - Saya√ß Giri≈üi`;
            document.getElementById('currentOfficeId').value = officeId;
            
            // Update meter numbers
            document.getElementById('electricMeterNo').textContent = office.electric.meter_no ? `(Saya√ß No: ${office.electric.meter_no})` : '';
            document.getElementById('waterMeterNo').textContent = office.water.meter_no ? `(Saya√ß No: ${office.water.meter_no})` : '';
            document.getElementById('gasMeterNo').textContent = office.gas.meter_no ? `(Saya√ß No: ${office.gas.meter_no})` : '';
            
            // Reset form
            document.getElementById('electricReading').value = '';
            document.getElementById('waterReading').value = '';
            document.getElementById('gasReading').value = '';
            
            // Update previous values
            updatePreviousValues(officeId);
            
            // Show first tab
            document.querySelectorAll('.meter-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.meter-form').forEach(form => form.style.display = 'none');
            document.querySelector('.meter-tab').classList.add('active');
            document.getElementById('electricMeterForm').style.display = 'block';
            
            showModal('meterModal');
        }

        function updatePreviousValues(officeId) {
            const previousReadings = AppData.meterReadings
                .filter(r => r.officeId === officeId)
                .sort((a, b) => new Date(b.date) - new Date(a.date));
            
            ['electric', 'water', 'gas'].forEach(type => {
                const previousReading = previousReadings.find(r => r.type === type);
                const element = document.getElementById(`${type}PreviousValue`);
                if (element) {
                    if (previousReading) {
                        element.textContent = `Son okunan: ${previousReading.value} (${formatDateTime(previousReading.date)} - ${previousReading.user})`;
                    } else {
                        element.textContent = 'Daha √∂nce okuma yapƒ±lmamƒ±≈ü';
                    }
                }
            });
        }

        function saveMeterReading() {
            const officeId = document.getElementById('currentOfficeId').value;
            const currentUser = AppData.currentUser;
            
            const activeTab = document.querySelector('.meter-tab.active').dataset.meter;
            const readingInput = document.getElementById(`${activeTab}Reading`);
            const value = parseFloat(readingInput.value);
            
            if (isNaN(value) || value < 0) {
                showToast('Ge√ßerli bir deƒüer giriniz', 'error');
                return;
            }
            
            const reading = {
                id: generateId(),
                officeId: officeId,
                type: activeTab,
                value: value,
                user: currentUser.fullName,
                date: new Date().toISOString()
            };
            
            AppData.meterReadings.push(reading);
            
            // Update office's last reading
            const office = AppData.offices.find(o => o.id === officeId);
            if (office && office[activeTab]) {
                office[activeTab].last_reading = value;
            }
            
            closeModal('meterModal');
            renderOffices();
            renderHistory();
            updateStats();
            showToast('Saya√ß deƒüeri kaydedildi', 'success');
        }

        // Office Management
        function editOffice(officeId) {
            const office = AppData.offices.find(o => o.id === officeId);
            if (!office) return;
            
            document.getElementById('editOfficeId').value = officeId;
            document.getElementById('editOfficeName').value = office.name;
            document.getElementById('editOfficeNo').value = office.office_no;
            document.getElementById('editElectricMeterNo').value = office.electric.meter_no;
            document.getElementById('editWaterMeterNo').value = office.water.meter_no;
            document.getElementById('editGasMeterNo').value = office.gas.meter_no;
            
            showModal('editOfficeModal');
        }

        function saveOfficeEdit() {
            const officeId = document.getElementById('editOfficeId').value;
            const name = document.getElementById('editOfficeName').value.trim();
            const officeNo = document.getElementById('editOfficeNo').value.trim();
            const electricMeterNo = document.getElementById('editElectricMeterNo').value.trim();
            const waterMeterNo = document.getElementById('editWaterMeterNo').value.trim();
            const gasMeterNo = document.getElementById('editGasMeterNo').value.trim();
            
            if (!name || !officeNo) {
                showToast('Ofis adƒ± ve no gereklidir', 'error');
                return;
            }
            
            const office = AppData.offices.find(o => o.id === officeId);
            if (office) {
                office.name = name;
                office.office_no = officeNo;
                office.electric.meter_no = electricMeterNo;
                office.water.meter_no = waterMeterNo;
                office.gas.meter_no = gasMeterNo;
                
                closeModal('editOfficeModal');
                renderOffices();
                renderOfficeManagement();
                showToast('Ofis bilgileri g√ºncellendi', 'success');
            }
        }

        // Event listeners setup
        function setupEventListeners() {
            // Login
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            document.getElementById('logoutBtn').addEventListener('click', handleLogout);
            
            // User menu
            document.getElementById('userInfo').addEventListener('click', () => {
                document.getElementById('userDropdown').classList.toggle('show');
            });
            
            // Menu items
            document.getElementById('userManagementBtn').addEventListener('click', () => {
                document.getElementById('userDropdown').classList.remove('show');
                showUserManagement();
            });
            
            document.getElementById('warehouseManagementBtn').addEventListener('click', () => {
                document.getElementById('userDropdown').classList.remove('show');
                showWarehouseManagement();
            });
            
            document.getElementById('officeManagementBtn').addEventListener('click', () => {
                document.getElementById('userDropdown').classList.remove('show');
                showOfficeManagement();
            });
            
            // Tab clicks
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.dataset.tab;
                    if (tabName) switchTab(tabName);
                });
            });
            
            // Meter tabs
            document.querySelectorAll('.meter-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.meter-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    const meterType = tab.dataset.meter;
                    document.querySelectorAll('.meter-form').forEach(form => form.style.display = 'none');
                    document.getElementById(`${meterType}MeterForm`).style.display = 'block';
                    
                    // Update previous values
                    const officeId = document.getElementById('currentOfficeId').value;
                    if (officeId) updatePreviousValues(officeId);
                });
            });
            
            // Office search
            document.getElementById('officeSearch').addEventListener('input', renderOffices);
            
            // User form
            document.getElementById('userForm').addEventListener('submit', handleUserCreation);
            
            // Warehouse form
            document.getElementById('warehouseForm').addEventListener('submit', handleWarehouseCreation);
            
            // Office edit form
            document.getElementById('editOfficeForm').addEventListener('submit', (e) => {
                e.preventDefault();
                saveOfficeEdit();
            });
            
            // Product form
            document.getElementById('addProductForm').addEventListener('submit', (e) => {
                e.preventDefault();
                saveProduct();
            });
            
            // Close modals on outside click
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    e.target.classList.remove('show');
                }
                
                if (!e.target.closest('.user-menu')) {
                    document.getElementById('userDropdown').classList.remove('show');
                }
            });
        }

        function showUserManagement() {
            if (!document.querySelector('.tab[data-tab="userManagement"]')) {
                const tab = document.createElement('button');
                tab.className = 'tab';
                tab.dataset.tab = 'userManagement';
                tab.innerHTML = '<span>üë•</span> Kullanƒ±cƒ± Y√∂netimi';
                tab.addEventListener('click', () => switchTab('userManagement'));
                document.getElementById('mainTabs').appendChild(tab);
            }
            switchTab('userManagement');
        }

        function showWarehouseManagement() {
            if (!document.querySelector('.tab[data-tab="warehouseManagement"]')) {
                const tab = document.createElement('button');
                tab.className = 'tab';
                tab.dataset.tab = 'warehouseManagement';
                tab.innerHTML = '<span>üè™</span> Depo Y√∂netimi';
                tab.addEventListener('click', () => switchTab('warehouseManagement'));
                document.getElementById('mainTabs').appendChild(tab);
            }
            switchTab('warehouseManagement');
        }

        function showOfficeManagement() {
            if (!document.querySelector('.tab[data-tab="officeManagement"]')) {
                const tab = document.createElement('button');
                tab.className = 'tab';
                tab.dataset.tab = 'officeManagement';
                tab.innerHTML = '<span>üè¢</span> Ofis Y√∂netimi';
                tab.addEventListener('click', () => switchTab('officeManagement'));
                document.getElementById('mainTabs').appendChild(tab);
            }
            switchTab('officeManagement');
        }

        function handleUserCreation(e) {
            e.preventDefault();
            
            const username = document.getElementById('newUsername').value.trim();
            const password = document.getElementById('newPassword').value.trim();
            const fullName = document.getElementById('newFullName').value.trim();
            const role = document.getElementById('newRole').value;
            
            if (AppData.users.find(u => u.username === username)) {
                showToast('Bu kullanƒ±cƒ± adƒ± zaten kullanƒ±lƒ±yor', 'error');
                return;
            }
            
            AppData.users.push({
                username,
                password: hashPassword(password),
                fullName,
                role
            });
            
            document.getElementById('userForm').reset();
            renderUsers();
            showToast('Kullanƒ±cƒ± ba≈üarƒ±yla eklendi', 'success');
        }

        function handleWarehouseCreation(e) {
            e.preventDefault();
            
            const name = document.getElementById('warehouseName').value.trim();
            
            if (!name) {
                showToast('Depo adƒ± gereklidir', 'error');
                return;
            }
            
            AppData.warehouses.push({
                id: generateId(),
                name: name,
                items: []
            });
            
            document.getElementById('warehouseForm').reset();
            renderWarehouseManagement();
            renderWarehouses();
            showToast('Depo ba≈üarƒ±yla eklendi', 'success');
        }

        function deleteUser(username) {
            if (confirm('Bu kullanƒ±cƒ±yƒ± silmek istediƒüinizden emin misiniz?')) {
                AppData.users = AppData.users.filter(u => u.username !== username);
                renderUsers();
                showToast('Kullanƒ±cƒ± silindi', 'success');
            }
        }

        function deleteWarehouse(warehouseId) {
            if (confirm('Bu depoyu silmek istediƒüinizden emin misiniz?')) {
                AppData.warehouses = AppData.warehouses.filter(w => w.id !== warehouseId);
                // Also remove all items from this warehouse
                AppData.warehouseItems = AppData.warehouseItems.filter(item => item.warehouseId !== warehouseId);
                renderWarehouseManagement();
                renderWarehouses();
                showToast('Depo silindi', 'success');
            }
        }

        // Warehouse Item Management
        function openAddProductModal(warehouseId) {
            const warehouse = AppData.warehouses.find(w => w.id === warehouseId);
            if (!warehouse) return;
            
            document.getElementById('addProductModalTitle').textContent = `${warehouse.name} - √úr√ºn Ekle`;
            document.getElementById('currentWarehouseId').value = warehouseId;
            
            // Reset form
            document.getElementById('addProductForm').reset();
            
            showModal('addProductModal');
        }

        function saveProduct() {
            const warehouseId = document.getElementById('currentWarehouseId').value;
            const name = document.getElementById('productName').value.trim();
            const category = document.getElementById('productCategory').value.trim();
            const quantity = parseInt(document.getElementById('productQuantity').value);
            const unit = document.getElementById('productUnit').value;
            
            if (!name || !category || !quantity || quantity <= 0) {
                showToast('T√ºm alanlarƒ± doƒüru ≈üekilde doldurunuz', 'error');
                return;
            }
            
            const newItem = {
                id: generateId(),
                warehouseId: warehouseId,
                name: name,
                category: category,
                quantity: quantity,
                unit: unit,
                date: new Date().toISOString(),
                addedBy: AppData.currentUser.fullName
            };
            
            AppData.warehouseItems.push(newItem);
            
            closeModal('addProductModal');
            renderWarehouses();
            showToast('√úr√ºn ba≈üarƒ±yla eklendi', 'success');
        }

        function viewWarehouseItems(warehouseId) {
            const warehouse = AppData.warehouses.find(w => w.id === warehouseId);
            if (!warehouse) return;
            
            const items = AppData.warehouseItems.filter(item => item.warehouseId === warehouseId);
            
            document.getElementById('warehouseItemsModalTitle').textContent = `${warehouse.name} - √úr√ºnler`;
            
            const container = document.getElementById('warehouseItemsList');
            
            if (items.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üì¶</div>
                        <div style="font-size: 1.25rem; margin-bottom: 0.5rem;">Hen√ºz √úr√ºn Yok</div>
                        <div>Bu depoda hen√ºz √ºr√ºn bulunmuyor.</div>
                    </div>
                `;
            } else {
                const html = `
                    <table class="history-table">
                        <thead>
                            <tr>
                                <th>√úr√ºn Adƒ±</th>
                                <th>Kategori</th>
                                <th>Miktar</th>
                                <th>Birim</th>
                                <th>Ekleyen</th>
                                <th>Tarih</th>
                                <th>ƒ∞≈ülem</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${items.map(item => `
                                <tr>
                                    <td>${item.name}</td>
                                    <td>${item.category}</td>
                                    <td>${item.quantity}</td>
                                    <td>${item.unit}</td>
                                    <td>${item.addedBy}</td>
                                    <td>${formatDateTime(item.date)}</td>
                                    <td>
                                        <button class="btn btn-sm btn-outline" onclick="deleteWarehouseItem('${item.id}')" style="color: var(--error-color); border-color: var(--error-color);">
                                            üóëÔ∏è Sil
                                        </button>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
                container.innerHTML = html;
            }
            
            showModal('warehouseItemsModal');
        }

        function deleteWarehouseItem(itemId) {
            if (confirm('Bu √ºr√ºn√º silmek istediƒüinizden emin misiniz?')) {
                AppData.warehouseItems = AppData.warehouseItems.filter(item => item.id !== itemId);
                renderWarehouses();
                // Refresh the modal if it's open
                const modalTitle = document.getElementById('warehouseItemsModalTitle').textContent;
                if (modalTitle.includes(' - √úr√ºnler')) {
                    const warehouseName = modalTitle.split(' - √úr√ºnler')[0];
                    const warehouse = AppData.warehouses.find(w => w.name === warehouseName);
                    if (warehouse) {
                        viewWarehouseItems(warehouse.id);
                    }
                }
                showToast('√úr√ºn silindi', 'success');
            }
        }

        // Excel Export Function
        function exportToExcel() {
            if (AppData.meterReadings.length === 0) {
                showToast('Hen√ºz kayƒ±t bulunmuyor', 'warning');
                return;
            }
            
            const data = [];
            
            // Header
            data.push(['Tarih', 'Ofis No', 'Ofis Adƒ±', 'Saya√ß T√ºr√º', 'Saya√ß No', 'Deƒüer', 'Birim', 'Okuyan Personel']);
            
            // Data
            AppData.meterReadings.forEach(reading => {
                const office = AppData.offices.find(o => o.id === reading.officeId);
                if (office) {
                    const meterType = reading.type === 'electric' ? 'Elektrik' : 
                                    reading.type === 'water' ? 'Su' : 'Doƒüalgaz';
                    const meterNo = office[reading.type]?.meter_no || '';
                    const unit = reading.type === 'electric' ? 'kWh' : 'm¬≥';
                    
                    data.push([
                        formatDateTime(reading.date),
                        office.office_no,
                        office.name || 'Bo≈ü Ofis',
                        meterType,
                        meterNo,
                        reading.value,
                        unit,
                        reading.user
                    ]);
                }
            });
            
            // Sort by date (newest first)
            data.slice(1).sort((a, b) => new Date(b[0]) - new Date(a[0]));
            
            const ws = XLSX.utils.aoa_to_sheet(data);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Saya√ß Verileri');
            
            const fileName = `sayac_verileri_${new Date().toISOString().split('T')[0]}.xlsx`;
            XLSX.writeFile(wb, fileName);
            showToast('Excel raporu indirildi', 'success');
        }

        // Make functions global
        window.openMeterModal = openMeterModal;
        window.saveMeterReading = saveMeterReading;
        window.closeModal = closeModal;
        window.editOffice = editOffice;
        window.saveOfficeEdit = saveOfficeEdit;
        window.deleteUser = deleteUser;
        window.deleteWarehouse = deleteWarehouse;
        window.openAddProductModal = openAddProductModal;
        window.saveProduct = saveProduct;
        window.viewWarehouseItems = viewWarehouseItems;
        window.deleteWarehouseItem = deleteWarehouseItem;
        window.exportToExcel = exportToExcel;

        // Initialize app
        function initializeApp() {
            try {
                initializeDefaultData();
                setupEventListeners();
                showLoginPage();
            } catch (error) {
                console.error('Initialization error:', error);
            } finally {
                setTimeout(() => {
                    const loadingScreen = document.getElementById('loadingScreen');
                    if (loadingScreen) {
                        loadingScreen.style.opacity = '0';
                        setTimeout(() => {
                            loadingScreen.style.display = 'none';
                        }, 300);
                    }
                }, 500);
            }
        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }
    </script>
</body>
</html>
